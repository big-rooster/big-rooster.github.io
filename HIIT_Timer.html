<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script src="https://one-page-tools.w3spaces.com/basicFunctions1.js"></script>
<script>
$(document).ready(function () {  
"use strict";
// updated 18 Nov 2023
let screenName="HIIT Timer"
document.title=screenName

$("body").append([
    $("<H1>").attr('id',"theheader").html(screenName),
    $("<label>").attr("for","restSeconds").html("Rest Seconds: "),
    $("<input>").attr("type","number").attr("id","restSeconds").val(75),
    $("<BR>"),
    $("<label>").attr("for","trainingSeconds").html("Training Seconds: "),
    $("<input>").attr("type","number").attr("id","trainingSeconds").val(75),
    $("<BR>"),
    $("<label>").attr("for","totalIterations").html("Total Iterations: "),
    $("<input>").attr("type","number").attr("id","totalIterations").val(13),
    $("<BR>"),
    $("<button>").attr("id","startTimerButton").html("Start"),
   $("<button>").attr("id","stopTimerButton").html("Stop"),
   $("<H1>").html($("<div>").attr("id","result"))
    ])


      var theTimer=1
      var secondCnt=0
      var iterationCnt=1
      var currentIteration="rest"
      
      function myTimer(){
        let mtimer=Null;
      function  s() {mtimer=window.setInterval(updateScreen,1000);};
        s();
        return mtimer;
      };
      
      function updateScreen(){
        let s=`${iterationCnt} ${currentIteration} ${secondCnt}`;
        $("#result").html(s);
        secondCnt+=1;
        if (secondCnt > $("#restSeconds").val() || secondCnt > $("#trainingSeconds").val()){
          secondCnt=0;
          
          switch (currentIteration){
            case "rest":
              currentIteration="move";
              break;
            case "move":
              currentIteration="rest";
              iterationCnt+=1;
              break;
          }
        }
        if (iterationCnt>$("#totalIterations").val()){
          secondCnt=0
          iterationCnt=1
          currentIteration="rest"
          window.clearInterval(theTimer);
          $("#result").html("You made it!!!");
        }
      };
      
      $("#startTimerButton").click(function(){
      theTimer=window.setInterval(updateScreen,1000);
      });
      $('#stopTimerButton').click(function(){
        window.clearInterval(theTimer);
      });

 });
        </script>
    </head>
    <body>
        </body>
    </html>   
